<p-button
  class="new-task-button"
  label="Новая задача"
  severity="warning"
  [outlined]="true"
  [rounded]="true"
  (click)="onAddTaskClick()"
>
</p-button>
<div *ngIf="tasksService.tasksListSig() as tasksList">
  <table class="table" *ngIf="tasksList.length > 0; else empty">
    <thead class="table__head">
      <tr class="table__row">
        <th class="table__column-header_done">Готово</th>
        <th
          (click)="sortBy('name')">
          Задача
          <span
            class="sort-indicator"
          ></span>
        </th>
        <th class="table__column-header_category" *ngIf="router.url.endsWith('all')">Категория</th>
        <th (click)="sortBy('expiresIn')" class="table__column-header_expires">Срок</th>
        <th class="table__column-header_priority" (click)="sortBy('priority')">Приоритет</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tr task-table-row
        class="table__task-container"
        *ngFor="let task of tasksList"
        [task]="task"
        (openEditForm)="openEditTaskForm($event)"
    ></tr>
  </table>
</div>

<ng-template #empty>
  <div class="center">
    У вас нет задач
  </div>
</ng-template>


<p-dialog
  header="{{ isEditForm ? 'Редактировать' : 'Новая задача:' }}"
  [(visible)]="displayModal"
  [style]="{ width: '50vw' }"
>
  <form [formGroup]="form" (ngSubmit)="onSubmitForm()">
    <input
      formControlName="name"
      id="name"
      type="text"
    >
    <p-calendar
      formControlName="expiresIn"
      appendTo="body"
      [minDate]='minDate'
      dateFormat="dd.mm.yy"
    >
    </p-calendar>
    <div>
      <input formControlName="priority" type="radio" value="low">Низкий
      <input formControlName="priority" type="radio" value="mid">Средний
      <input formControlName="priority" type="radio" value="high">Высокий
    </div>
    <p-dropdown [options]="categoriesService.userCategoriesSig()"

                placeholder="Категория задачи"
                optionLabel="name"
                inputId="float-label"
                appendTo="body"
                formControlName="category"
    ></p-dropdown>
    <label for="float-label">Категория задачи</label>
    <button type="submit">{{ isEditForm ? 'Сохранить' : 'Создать'}}</button>
  </form>
</p-dialog>
